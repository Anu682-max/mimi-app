// Sample users for testing discover feature
export const sampleUsers = [
  {
    id: 'user-1',
    firstName: 'Ariuka',
    lastName: 'Batkhuyag',
    age: 24,
    gender: 'female',
    bio: '–ó—É—Ä–∞–≥ –∑—É—Ä–∞—Ö –¥—É—Ä—Ç–∞–π, –∞—è–ª–∞–ª —Ö–∏–π—Ö —Ö–æ–±–±–∏—Ç–æ–π üé®‚úàÔ∏è',
    occupation: 'Graphic Designer',
    city: 'Ulaanbaatar',
    country: 'Mongolia',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Ariuka'],
    interests: ['–ó—É—Ä–∞–≥', '–ê—è–ª–∞–ª', '–£—Ä–∞–Ω –±“Ø—Ç—ç—ç–ª', '–ö–∏–Ω–æ'],
  },
  {
    id: 'user-2',
    firstName: 'Boldbaatar',
    lastName: 'Ganbold',
    age: 27,
    gender: 'male',
    bio: 'IT engineer, —Å–ø–æ—Ä—Ç —Å–æ–Ω–∏—Ä—Ö–æ–≥—á üíª‚öΩ',
    occupation: 'Software Engineer',
    city: 'Ulaanbaatar',
    country: 'Mongolia',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Bold'],
    interests: ['–ü—Ä–æ–≥—Ä–∞–º—á–ª–∞–ª', '–•”©–ª –±”©–º–±”©–≥', '–ù–æ–º—ã–Ω –∫–ª—É–±'],
  },
  {
    id: 'user-3',
    firstName: 'Nandin',
    lastName: 'Erdene',
    age: 23,
    gender: 'female',
    bio: '–•”©–≥–∂–∏–º —Å–æ–Ω—Å–æ—Ö, –Ω–∞–π–∑ –Ω”©—Ö”©–¥—Ç—ç–π —è–≤–∞—Ö –¥—É—Ä—Ç–∞–π üéµüëØ',
    occupation: 'Marketing Specialist',
    city: 'Seoul',
    country: 'South Korea',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Nandin'],
    interests: ['–•”©–≥–∂–∏–º', 'K-pop', '–ó–æ—á–∏–¥ —Ö“Ø–ª—ç—ç—Ö', '–•–æ–æ–ª —Ö–∏–π—Ö'],
  },
  {
    id: 'user-4',
    firstName: 'Enkhjin',
    lastName: 'Munkhbat',
    age: 26,
    gender: 'male',
    bio: '–£—É–ª—ã–Ω –∞—è–ª–∞–ª, –≥—ç—Ä—ç–ª –∑—É—Ä–∞–≥ –∞–≤–∞—Ö —Å–æ–Ω–∏—Ä—Ö–æ–ª—Ç–æ–π üèîÔ∏èüì∏',
    occupation: 'Photographer',
    city: 'Ulaanbaatar',
    country: 'Mongolia',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Enkh'],
    interests: ['–ì—ç—Ä—ç–ª –∑—É—Ä–∞–≥', '–£—É–ª—ã–Ω –∞—è–ª–∞–ª', '–ë–∞–π–≥–∞–ª—å'],
  },
  {
    id: 'user-5',
    firstName: 'Sarangerel',
    lastName: 'Dorj',
    age: 25,
    gender: 'female',
    bio: '–ë“Ø–∂–∏–≥, —Ñ–∏—Ç–Ω–µ—Å—Å, —ç—Ä“Ø“Ø–ª –∞–º—å–¥—Ä–∞–ª—ã–Ω —Ö—ç–≤ –º–∞—è–≥ üíÉüèãÔ∏è',
    occupation: 'Fitness Trainer',
    city: 'Tokyo',
    country: 'Japan',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Sara'],
    interests: ['–ë“Ø–∂–∏–≥', '–§–∏—Ç–Ω–µ—Å—Å', '–ô–æ–≥–∞', '–≠—Ä“Ø“Ø–ª —Ö–æ–æ–ª'],
  },
  {
    id: 'user-6',
    firstName: 'Ganbat',
    lastName: 'Tseren',
    age: 29,
    gender: 'male',
    bio: '–ë–∏–∑–Ω–µ—Å —ç—Ä—Ö–ª—ç–≥—á, —Ö”©—Ä”©–Ω–≥”© –æ—Ä—É—É–ª–∞–ª—Ç —Å–æ–Ω–∏—Ä—Ö–¥–æ–≥ üìàüíº',
    occupation: 'Entrepreneur',
    city: 'New York',
    country: 'USA',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Ganbat'],
    interests: ['–ë–∏–∑–Ω–µ—Å', '–•”©—Ä”©–Ω–≥”© –æ—Ä—É—É–ª–∞–ª—Ç', '–ì–æ–ª—å—Ñ'],
  },
  {
    id: 'user-7',
    firstName: 'Oyunaa',
    lastName: 'Bold',
    age: 22,
    gender: 'female',
    bio: '–û—é—É—Ç–∞–Ω, —Ö–∏—á—ç—ç–ª —Å—É—Ä–∞—Ö, –Ω–∞–π–∑ –æ–ª–æ—Ö —Ö“Ø—Å—ç–ª—Ç—ç–π üìöüå∏',
    occupation: 'Student',
    city: 'London',
    country: 'UK',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Oyunaa'],
    interests: ['–ù–æ–º —É–Ω—à–∏—Ö', '–•–∏—á—ç—ç–ª', 'Coffee', '–ö–∞—Ñ–µ —è–≤–∞—Ö'],
  },
  {
    id: 'user-8',
    firstName: 'Munkhbold',
    lastName: 'Bat',
    age: 28,
    gender: 'male',
    bio: '–•”©–≥–∂–∏–º—á–∏–Ω, –≥–∏—Ç–∞—Ä —Ç–æ–≥–ª–æ—Ö —Å–æ–Ω–∏—Ä—Ö–æ–ª—Ç–æ–π üé∏üé§',
    occupation: 'Musician',
    city: 'Ulaanbaatar',
    country: 'Mongolia',
    photos: ['https://api.dicebear.com/7.x/avataaars/svg?seed=Munkh'],
    interests: ['–•”©–≥–∂–∏–º', '–ì–∏—Ç–∞—Ä', 'Rock', '–¢–æ–≥–ª–æ–ª—Ç'],
  },
];

// In-memory storage for likes and matches
export const userLikes = new Map<string, Set<string>>(); // userId -> Set of liked userIds
export const userMatches = new Map<string, Set<string>>(); // userId -> Set of matched userIds

export function handleSwipe(currentUserId: string, targetUserId: string, action: 'like' | 'pass'): { isMatch: boolean } {
  if (action === 'pass') {
    return { isMatch: false };
  }

  // Add like
  if (!userLikes.has(currentUserId)) {
    userLikes.set(currentUserId, new Set());
  }
  userLikes.get(currentUserId)!.add(targetUserId);

  // Check if target user also liked current user
  const targetLikes = userLikes.get(targetUserId);
  const isMatch = targetLikes?.has(currentUserId) || false;

  if (isMatch) {
    // Add to matches
    if (!userMatches.has(currentUserId)) {
      userMatches.set(currentUserId, new Set());
    }
    if (!userMatches.has(targetUserId)) {
      userMatches.set(targetUserId, new Set());
    }
    userMatches.get(currentUserId)!.add(targetUserId);
    userMatches.get(targetUserId)!.add(currentUserId);
  }

  return { isMatch };
}

export function getMatches(userId: string) {
  const matchIds = userMatches.get(userId) || new Set();
  return sampleUsers.filter(user => matchIds.has(user.id));
}
